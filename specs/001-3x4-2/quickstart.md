# Quickstart: ポケモン将棋

**Feature**: 001-3x4-2
**Date**: 2025-10-01
**Purpose**: 実装完了後の統合テスト・手動検証シナリオ

---

## 前提条件

- ✅ 実装が完了している
- ✅ `npm run dev` でローカル開発サーバーが起動可能
- ✅ モダンブラウザ（Chrome, Firefox, Safari, Edge最新版）でアクセス可能

---

## 起動手順

### 1. 開発サーバー起動

```bash
cd /Users/togo/Repositories/pokesho
npm run dev
```

ブラウザで `http://localhost:5173` にアクセス。

### 2. 初回ロード確認

**期待結果**:
- ✅ 5秒以内にゲーム画面が表示される（NFR-001）
- ✅ PokeAPIから画像取得中、または
- ✅ 5秒経過後にプレースホルダー画像でゲームが開始される（NFR-002）

---

## テストシナリオ

### シナリオ1: 基本的なゲームフロー

#### ステップ1-1: 初期配置確認

**操作**: 画面を目視確認

**期待結果**:
- ✅ 3×4マスの盤面が表示される（FR-001）
- ✅ 後手側（上）: 左からフシギダネ、ピカチュウ、ゼニガメ
- ✅ 後手側2行目: 中央にヒトカゲ
- ✅ 先手側（下）: 左からフシギダネ、ピカチュウ、ゼニガメ
- ✅ 先手側2行目: 中央にヒトカゲ
- ✅ 「先手の番」が画面上部に表示される（FR-011）

#### ステップ1-2: 駒の選択と移動

**操作**: 先手のヒトカゲをクリック

**期待結果**:
- ✅ ヒトカゲの前方1マスがハイライト表示される（FR-009）

**操作**: ハイライトされたマスをクリック

**期待結果**:
- ✅ ヒトカゲが前方に移動する（FR-010）
- ✅ ターン表示が「後手の番」に変わる（FR-012）

#### ステップ1-3: 相手の駒を取る

**操作**: 後手のヒトカゲで先手のヒトカゲを取る

**期待結果**:
- ✅ 先手のヒトカゲが盤面から消える（FR-013）
- ✅ 後手の手駒エリア（右側）にヒトカゲが追加される（FR-014, FR-015）

#### ステップ1-4: 手駒を打つ

**操作**: 後手の手駒エリアのヒトカゲをクリック

**期待結果**:
- ✅ 盤上の空きマスがハイライト表示される

**操作**: ハイライトされた空きマスをクリック

**期待結果**:
- ✅ 手駒が盤上に配置される（FR-016）
- ✅ ターン表示が「先手の番」に変わる

---

### シナリオ2: 進化（成り）システム

#### ステップ2-1: ヒトカゲを相手陣地最奥行に移動

**操作**: 先手のヒトカゲを複数回移動させて後手陣地の1行目（row 0）に到達

**期待結果**:
- ✅ ヒトカゲの画像がリザードンに変わる（FR-018）
- ✅ 以降、リザードンの移動パターン（前後左右+斜め前）で移動可能（FR-019）

---

### シナリオ3: 勝敗判定

#### ステップ3-1: ピカチュウ捕獲による勝利

**操作**: 先手の駒で後手のピカチュウを取る

**期待結果**:
- ✅ 「先手の勝利！」メッセージが表示される（FR-022）
- ✅ それ以上の操作を受け付けなくなる（FR-023）
- ✅ 「リスタート」ボタンが表示される（FR-024）

**操作**: リスタートボタンをクリック

**期待結果**:
- ✅ ゲームが初期状態にリセットされる（FR-024）

#### ステップ3-2: トライによる勝利

**操作**: 先手のピカチュウを後手陣地の1行目（row 0）に移動

**期待結果**:
- ✅ 「先手の勝利！」メッセージが表示される（FR-022）
- ✅ それ以上の操作を受け付けなくなる（FR-023）
- ✅ 「リスタート」ボタンが表示される（FR-024）

---

### シナリオ4: エッジケース

#### ステップ4-1: 移動可能マスがない駒を選択

**操作**: 四方を自分の駒または盤面外で囲まれた駒を選択

**期待結果**:
- ✅ ハイライトが一切表示されない（FR-009-1）

#### ステップ4-2: 空きマスがない状態で手駒を選択

**操作**: 盤面がすべて埋まっている状態で手駒をクリック

**期待結果**:
- ✅ 手駒がクリックできない状態になる（FR-016-1）

---

### シナリオ5: 画像キャッシュ

#### ステップ5-1: 初回ロード

**操作**: ブラウザのlocalStorageをクリア後、ページをリロード

**期待結果**:
- ✅ PokeAPIから画像を取得（DevToolsのNetworkタブで確認）
- ✅ 5秒以内に画像が表示される、または
- ✅ 5秒経過後にプレースホルダー画像が表示される（NFR-002）

#### ステップ5-2: 2回目以降のロード

**操作**: ページをリロード

**期待結果**:
- ✅ 1秒以内にゲームが開始される（NFR-003）
- ✅ ネットワークリクエストが発生しない（キャッシュヒット）

#### ステップ5-3: タイムアウトテスト

**操作**: DevToolsのNetworkタブで"Slow 3G"を選択してページをリロード

**期待結果**:
- ✅ 5秒経過後にプレースホルダー画像でゲームが開始される（NFR-002）

---

### シナリオ6: パフォーマンス

#### ステップ6-1: 駒移動の滑らかさ

**操作**: DevToolsのPerformanceタブで記録開始 → 駒を複数回移動 → 記録停止

**期待結果**:
- ✅ 駒移動のアニメーションが60fps（16ms以内）で描画される

#### ステップ6-2: バンドルサイズ

**操作**: `npm run build` 実行後、`dist/assets/*.js`ファイルのサイズを確認

**期待結果**:
- ✅ gzip圧縮後のJSバンドルサイズが500KB以下

---

### シナリオ7: アクセシビリティ

#### ステップ7-1: キーボード操作

**操作**: Tabキーで盤面を選択 → Enterキーで駒を選択 → Tabキーで移動先を選択 → Enterキーで移動

**期待結果**:
- ✅ キーボードのみでゲームがプレイ可能

#### ステップ7-2: スクリーンリーダー

**操作**: VoiceOver (macOS) またはNVDA (Windows) を有効化して操作

**期待結果**:
- ✅ 各マスの状態（「空きマス」「先手のピカチュウ」など）が読み上げられる
- ✅ aria-labelが適切に設定されている

#### ステップ7-3: カラーコントラスト

**操作**: DevToolsのAccessibilityタブでコントラスト比を確認

**期待結果**:
- ✅ すべてのテキストとハイライトがWCAG AA準拠（コントラスト比4.5:1以上）

---

## 受入基準チェックリスト

### 機能要件

- [ ] FR-001〜FR-024: すべての機能要件が満たされている
- [ ] シナリオ1〜4: すべてのテストシナリオがPASS

### 非機能要件

- [ ] NFR-001: 初回ロード5秒以内
- [ ] NFR-002: タイムアウト時プレースホルダー表示
- [ ] NFR-003: 2回目以降1秒以内
- [ ] パフォーマンス: 60fps駒移動
- [ ] バンドルサイズ: 500KB以下

### アクセシビリティ

- [ ] キーボード操作可能
- [ ] aria-label設定済み
- [ ] WCAG AAコントラスト比準拠

### 憲法準拠

- [ ] Principle I: シンプルで直感的なUI
- [ ] Principle II: 最小限の依存関係
- [ ] Principle III: オフライン動作
- [ ] Principle IV: パフォーマンス第一
- [ ] Principle V: アクセシビリティ対応

---

## トラブルシューティング

### 画像が表示されない

**原因**: PokeAPI接続失敗またはlocalStorage容量不足

**対処**:
1. DevToolsのConsoleでエラーを確認
2. localStorageを手動クリア
3. プレースホルダー画像が`public/placeholder/piece-placeholder.png`に存在するか確認

### ゲームが動作しない

**原因**: JavaScriptエラー

**対処**:
1. DevToolsのConsoleでエラーメッセージを確認
2. TypeScriptの型エラーがないか`npm run build`で確認
3. ESLintエラーがないか`npm run lint`で確認

---

## 次のステップ

すべてのテストシナリオがPASSしたら、`/tasks`コマンドでtasks.mdを生成し、実装フェーズに進みます。
